"use strict";(self.webpackChunklearnReact=self.webpackChunklearnReact||[]).push([[85],{8085:(e,s,t)=>{t.r(s),t.d(s,{default:()=>O});var o=t(5043),r=t(2166),i=t(3216),l=t(7048),n=t(5977),a=t(2794),d=t(5963),c=t(3842),u=t(6545),h=t(6097);const x="MyPosts_MyPosts__8CHeK",j="MyPosts_addPost__vrj7C",f="Post_Post__SCj4T";var p=t(579);const m=e=>(0,p.jsxs)("div",{className:f,children:[(0,p.jsx)("p",{children:e.message}),(0,p.jsx)("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTnGWEwXpRS7z7rVaGrjIWWTdE8_TiYTGiYjA&s",alt:"IMG"}),(0,p.jsxs)("p",{children:["Like ",e.likesCount]}),(0,p.jsx)("button",{onClick:()=>e.deletePost(e.id),children:"Delete this post"})]}),v=e=>{const s=s=>{e.deletePost(s)};let t=e.posts.map((e=>(0,p.jsx)(m,{deletePost:s,id:e.id,message:e.message,likesCount:e.likesCount},e.id)));return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:j,children:e.isOwner&&(0,p.jsx)(P,{onSubmit:s=>{s.newPostText&&e.addPost(s.newPostText)}})}),(0,p.jsx)("div",{className:x,children:t})]})},P=(0,c.A)({form:"ProfileAddNewPostForm"})((e=>(0,p.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,p.jsx)(d.A,{placeholder:"Post message",component:h.TM,name:"newPostText",validate:[u.mw,u.C_]}),(0,p.jsx)("button",{children:"Add Post"})]}))),b=o.memo(v);const g=(0,r.Ng)((e=>({posts:e.profilePage.posts,newPostText:e.profilePage.newPostText})),(e=>({addPost:s=>{e((0,n._N)(s))},deletePost:s=>{e((0,n.Sm)(s))}})))(b),_={};var S=t(4441),A=t(2202);const F=(0,c.A)({form:"edit-profile"})((e=>{let{handleSubmit:s,profile:t,error:o}=e;return(0,p.jsxs)("form",{onSubmit:s,children:[(0,p.jsx)("button",{children:"Save"}),o&&(0,p.jsx)("div",{className:A.A.FormSummaryError,children:o}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Full Name: "}),(0,h.Fv)("Full name","fullName",[],h.pd)]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Looking for a job: "}),(0,h.Fv)("","lookingForAJob",[],h.pd,{type:"checkbox"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"My professional skills :"}),(0,h.Fv)("My professional skills","lookingForAJobDescription",[],h.TM)]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"About me :"}),(0,h.Fv)("About me","aboutMe",[],h.TM)]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Contacts: "})," ",Object.keys(t.contacts).map((e=>(0,p.jsx)("div",{children:(0,p.jsxs)("b",{children:[e,": ",(0,h.Fv)(e,"contacts."+e,[],h.pd)]})})))]})]})})),k="ProfileInfo_Profile__ySV0h",w="ProfileInfo_ProfileInfo__Z8dFK",y="ProfileInfo_Avatar__Y-nEA",C="ProfileStatus_ProfileStatus__9f4bE",T=e=>{const[s,t]=(0,o.useState)(!1),[r,i]=(0,o.useState)(e.status);(0,o.useEffect)((()=>{i(e.status)}),[e.status]);return(0,p.jsx)("div",{className:C,children:s?(0,p.jsx)("div",{children:(0,p.jsx)("input",{autoFocus:!0,onBlur:()=>{t(!1),e.updateStatus(r)},onChange:e=>{i(e.currentTarget.value)},value:r})}):(0,p.jsx)("div",{children:(0,p.jsx)("p",{onDoubleClick:()=>{t(!0)},children:e.status||"No status"})})})},M=e=>{let{contactTitle:s,contactValue:t}=e;return(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:s}),": ",t]})},N=e=>{let{profile:s,isOwner:t,goToEditMode:o}=e;return(0,p.jsxs)("div",{children:[t&&(0,p.jsx)("button",{onClick:o,children:"Edit"}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Full Name: "}),s.fullName]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Looking for a job: "}),s.lookingForAJob?"yes":"no"]}),s.lookingForAJob&&(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"My professional skills :"}),s.lookingForAJobDescription]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"About me :"})," ",s.aboutMe]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Contacts: "})," ",Object.keys(s.contacts).map((e=>(0,p.jsx)(M,{contactTitle:e,contactValue:s.contacts[e]},e)))]})]})},E=e=>{let[s,t]=(0,o.useState)(!1);if(!e.profile)return(0,p.jsx)(a.A,{});const{photos:r={}}=e.profile;return(0,p.jsxs)("div",{className:k,children:[(0,p.jsxs)("div",{className:y,children:[(0,p.jsx)("img",{src:r.large||S,alt:"IMG"}),e.isOwner?(0,p.jsx)("input",{type:"file",onChange:s=>{s.target.files.length&&e.savePhoto(s.target.files[0])}}):null]}),(0,p.jsxs)("div",{className:w,children:[(0,p.jsx)(T,{aboutMe:e.profile.aboutMe,status:e.status,updateStatus:e.updateStatus}),s?(0,p.jsx)(F,{initialValues:e.profile,profile:e.profile,onSubmit:s=>{e.saveProfile(s).then((()=>{t(!1)}))}}):(0,p.jsx)(N,{profile:e.profile,isOwner:e.isOwner,goToEditMode:()=>{t(!0)}})]})]})},I=e=>(0,p.jsxs)("div",{className:_.Profile,children:[(0,p.jsx)(E,{profile:e.profile,status:e.status,updateStatus:e.updateStatus,isOwner:e.isOwner,savePhoto:e.savePhoto,saveProfile:e.saveProfile}),(0,p.jsx)(g,{isOwner:e.isOwner})]}),O=(0,l.Zz)((0,r.Ng)((e=>({profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth})),{setUserProfile:n.p,getStatus:n.BS,updateStatus:n.yB,savePhoto:n.Ah,saveProfile:n.Lt}))((e=>{let{setUserProfile:s,getStatus:t,profile:r,status:l,updateStatus:n,authorizedUserId:d,isAuth:c,savePhoto:u,saveProfile:h}=e;const[x,j]=(0,o.useState)(!1),[f,m]=(0,o.useState)(!0);let{userId:v}=(0,i.g)();return v=v||d,(0,o.useEffect)((()=>{v&&(async()=>{try{m(!0),await s(v),await t(v),j(String(v)===String(d))}finally{m(!1)}})()}),[v,s,t,d]),c||v?(0,p.jsx)(p.Fragment,{children:f?(0,p.jsx)(a.A,{}):(0,p.jsx)(I,{isOwner:x,profile:r,status:l,updateStatus:n,savePhoto:u,saveProfile:h})}):(0,p.jsx)(i.C5,{to:"/login"})}))},6097:(e,s,t)=>{t.d(s,{pd:()=>d,TM:()=>a,Fv:()=>c});var o=t(5963);const r="createFormsControls_Textarea__IlAFW",i="createFormsControls_error__CVMTv";var l=t(579);const n=e=>s=>{let{input:t,meta:{touched:o,error:n},...a}=s;const d=o&&n;return(0,l.jsxs)("div",{className:r+" "+(d&&i),children:[(0,l.jsx)(e,{...t,...a}),d&&(0,l.jsx)("span",{children:n})]})},a=n("textarea"),d=n("input"),c=function(e,s,t,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return(0,l.jsxs)("div",{children:[(0,l.jsx)(o.A,{validate:t,placeholder:e,name:s,component:r,...i}),n]})}},6545:(e,s,t)=>{t.d(s,{C_:()=>i,mw:()=>o,yC:()=>l});const o=e=>{if(!e)return"Field is required"},r=e=>s=>{if(s&&s.length>e)return"Max length is ".concat(e," symbols")},i=r(10),l=r(100)},2202:(e,s,t)=>{t.d(s,{A:()=>o});const o={Login:"Login_Login__VdlKH",FormSummaryError:"Login_FormSummaryError__JXw3A"}}}]);
//# sourceMappingURL=85.871597fe.chunk.js.map